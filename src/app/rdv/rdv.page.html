<ion-header>
  <ion-toolbar>
  	 <ion-buttons slot="start">
        <ion-back-button (click)="onGoBack()"></ion-back-button>
      </ion-buttons>   	
    <ion-title>Rechercher un/des rendez-vous</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item class="debutListe">
      <ion-label>Jour :</ion-label>
      <ion-select [(ngModel)]="unJour" (ionInput)="getJour($event)" interface="popover">
          <ion-select-option value='samedi'>Samedi</ion-select-option>
          <ion-select-option value='dimanche'>Dimanche</ion-select-option>
      </ion-select>
  </ion-item>
  <ion-item class="Liste">
      <ion-label>A partir de :</ion-label>
      <ion-datetime [(ngModel)]="uneHeure" displayFormat="HH:mm"></ion-datetime>
  </ion-item>
  <ion-item class="Liste">
      <ion-label>Thèmes :</ion-label>
      <ion-select [(ngModel)]="unTheme" (ionInput)="getTheme($event)" interface="popover" multiple="false">
          <ion-select-option value="0">Tous les thèmes</ion-select-option>
          <ion-select-option *ngFor="let theme of themes" value={{theme.id}}>{{theme.libelle}}</ion-select-option>
      </ion-select>
  </ion-item>
  <ion-item class="Liste">
      <ion-label>Tranche d'âge :</ion-label>
      <ion-select [(ngModel)]="uneTranche" interface="popover" (ionInput)="getTrancheAge($event)">
          <ion-select-option value="0">Toutes les tranches</ion-select-option>
          <ion-select-option *ngFor="let age of ages" value={{age.id}}>{{age.libelle}}</ion-select-option>
      </ion-select>
  </ion-item>
  <ion-item class="finListe">
      <ion-label>Type de RDV :</ion-label>
      <ion-select [(ngModel)]="unTypeRDV" interface="popover">
          <ion-select-option value="0">Tous les types</ion-select-option>
          <ion-select-option *ngFor="let typeRDV of typesRDV" value={{typeRDV.id}}>{{typeRDV.nom}}</ion-select-option>
      </ion-select>
  </ion-item>

  <br><ion-button color="primary" expand="full" shape="round" (click)="onSearch()">Rechercher</ion-button>

  <ion-list>
    <ion-item *ngFor="let r of mesRDV">
      <button item-end small icon-only ion-button color="orange" (click)="onFavoris( r )"><ion-icon color="primary" name="star"></ion-icon></button>
      <ion-card full routerLink="rdv/{{r.id}}">
        <ion-card-header>
            <ion-card-title>{{r.nom}}</ion-card-title>
            <ion-card-subtitle>{{r.nomExposant}}</ion-card-subtitle>
          </ion-card-header>        
        <ion-card-content>
          <p style="white-space:initial;">pour {{r.age}} sur le stand n° <b>{{r.idStand}}</b></p><br>
          <p><b>{{r.jour}} <span [hidden]="r.duree=='en continu'">{{r.heure}} durée: {{r.duree}} minutes</span></b></p> 
        </ion-card-content>
      </ion-card>
    </ion-item>    
    <ion-button full [hidden]="mesRDV.length>5 || !mesRDV.length" (click)="onPlan()">Afficher sur le plan</ion-button>               
  </ion-list>
</ion-content>
